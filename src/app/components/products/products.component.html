<div class="products-container">
  <section class="products-hero">
    <div class="hero-content">
      <h1>Nuestros Productos</h1>
      <p>Descubre nuestra amplia gama de productos tecnológicos de alta calidad</p>
    </div>
  </section>

  <section class="filters-section">
    <div class="container">
      <div class="filters">
        <div class="search-box">
          <input 
            type="text" 
            placeholder="Buscar productos..." 
            [(ngModel)]="searchTerm"
            (input)="onSearchChange()"
            class="search-input"
          >
        </div>
        
        <div class="category-filters">
          @for (category of categories; track category) {
            <button 
              class="category-btn"
              [class.active]="selectedCategory === category"
              (click)="filterByCategory(category)"
            >
              {{ category }}
            </button>
          }
        </div>
      </div>
    </div>
  </section>

  <section class="products-section">
    <div class="container">
      @if (loading) {
        <div class="loading">
          <div class="spinner"></div>
          <p>Cargando productos...</p>
        </div>
      } @else if (error) {
        <div class="error">
          <p>{{ error }}</p>
          <button (click)="loadProducts()" class="retry-btn">Intentar de nuevo</button>
        </div>
      } @else if (filteredProducts.length === 0) {
        <div class="no-products">
          <p>No se encontraron productos que coincidan con tu búsqueda.</p>
        </div>
      } @else {
        <div class="products-grid">
          @for (product of filteredProducts; track product.id) {
            <div class="product-card">
              <div class="product-image">
                <img [src]="product.image" [alt]="product.name" loading="lazy">
                <div class="product-overlay">
                  <button class="view-details-btn">Ver Detalles</button>
                </div>
              </div>
              
              <div class="product-info">
                <h3 class="product-name">{{ product.name }}</h3>
                <p class="product-description">{{ product.description }}</p>
                
                <div class="product-rating">
                  <span class="stars">
                    @for (star of getStarRating(product.rating); track $index) {
                      <span class="star">{{ star }}</span>
                    }
                  </span>
                  <span class="rating-text">({{ product.rating }})</span>
                </div>
                
                <div class="product-meta">
                  <span class="product-category">{{ product.category }}</span>
                  <span class="product-stock">Stock: {{ product.stock }}</span>
                </div>
                
                <div class="product-price">
                  <span class="price">{{ formatPrice(product.price) }}</span>
                </div>
              </div>
            </div>
          }
        </div>
        
        <div class="products-summary">
          <p>Mostrando {{ filteredProducts.length }} de {{ products.length }} productos</p>
        </div>
      }
    </div>
  </section>
</div> 