<div class="products-container">
  <section class="products-hero">
    <div class="hero-content">
      <h1 class="hero-title">Galer√≠a de Productos</h1>
      <p class="hero-subtitle">Descubre la mejor selecci√≥n de electr√≥nicos, audio, fotograf√≠a y demas en ElectroHub</p>
    </div>
  </section>

  <section class="filters-section">
    <div class="container">
      <div class="filters">
        <div class="search-box">
          <div class="search-icon">üîç</div>
          <input 
            type="text" 
            placeholder="Buscar productos..." 
            [(ngModel)]="searchTerm"
            (input)="onSearchChange()"
            class="search-input"
          >
        </div>
        
        <div class="category-filters">
          @for (category of categories; track category) {
            <button 
              class="category-btn"
              [class.active]="selectedCategory === category"
              (click)="filterByCategory(category)"
            >
              {{ category }}
            </button>
          }
        </div>
      </div>
    </div>
  </section>

  <section class="products-section">
    <div class="container">
      @if (loading) {
        <div class="loading">
          <div class="spinner"></div>
          <p>Cargando galer√≠a de productos...</p>
        </div>
      } @else if (error) {
        <div class="error">
          <div class="error-icon">‚ö†Ô∏è</div>
          <p>{{ error }}</p>
          <button (click)="loadProducts()" class="retry-btn">Intentar de nuevo</button>
        </div>
      } @else if (filteredProducts.length === 0) {
        <div class="no-products">
          <div class="no-products-icon">üîç</div>
          <p>No se encontraron productos que coincidan con tu b√∫squeda.</p>
          <button (click)="clearFilters()" class="clear-filters-btn">Limpiar filtros</button>
        </div>
      } @else {
        <div class="products-gallery">
          @for (product of filteredProducts; track product.id) {
            <div class="product-card">
              <div class="product-image-container">
                <img [src]="product.image" [alt]="product.name" loading="lazy" class="product-image">
                <div class="product-overlay">
                  <div class="overlay-content">
                    <button class="view-details-btn">Ver Detalles</button>
                    <div class="quick-info">
                      <span class="price-badge">{{ formatPrice(product.price) }}</span>
                      <span class="stock-badge" [class.low-stock]="product.stock < 20">
                        Stock: {{ product.stock }}
                      </span>
                    </div>
                  </div>
                </div>
                <div class="product-badges">
                  @if (product.stock < 20) {
                    <span class="badge low-stock-badge">Pocas unidades</span>
                  }
                  @if (product.rating >= 4.5) {
                    <span class="badge top-rated-badge">‚≠ê Top Rated</span>
                  }
                </div>
              </div>
              
              <div class="product-info">
                <div class="product-header">
                  <h3 class="product-name">{{ product.name }}</h3>
                  <div class="product-rating">
                    <span class="stars">
                      @for (star of getStarRating(product.rating); track $index) {
                        <span class="star" [class.filled]="star === '‚òÖ'">{{ star }}</span>
                      }
                    </span>
                    <span class="rating-text">({{ product.rating }})</span>
                  </div>
                </div>
                
                <p class="product-description">{{ product.description | slice:0:100 }}{{ product.description.length > 100 ? '...' : '' }}</p>
                
                <div class="product-meta">
                  <span class="product-category">
                    <span class="category-icon">üè∑Ô∏è</span>
                    {{ product.category }}
                  </span>
                </div>
                
                <div class="product-footer">
                  <div class="product-price">
                    <span class="price">{{ formatPrice(product.price) }}</span>
                  </div>
                  <button class="add-to-cart-btn">
                    <span class="cart-icon">üõí</span>
                    Agregar
                  </button>
                </div>
              </div>
            </div>
          }
        </div>
        
        <div class="products-summary">
          <p class="summary-text">
            Mostrando <strong>{{ filteredProducts.length }}</strong> de <strong>{{ products.length }}</strong> productos
          </p>
          @if (filteredProducts.length < products.length) {
            <button (click)="clearFilters()" class="clear-filters-btn">Ver todos los productos</button>
          }
        </div>
      }
    </div>
  </section>
</div> 